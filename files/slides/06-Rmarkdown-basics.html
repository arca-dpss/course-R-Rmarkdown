<!DOCTYPE html>
<html lang="" xml:lang="">
  <head>
    <title>06 R Markdown Basics</title>
    <meta charset="utf-8" />
    <meta name="author" content="Claudio Zandonella" />
    <script src="libs/header-attrs-2.14/header-attrs.js"></script>
    <link href="libs/remark-css-0.0.1/default-fonts.css" rel="stylesheet" />
    <link href="libs/remark-css-0.0.1/default.css" rel="stylesheet" />
    <script src="libs/freezeframe-5.0.2/freezeframe.min.js"></script>
    <script src="libs/xaringanExtra-freezeframe-0.0.1/freezeframe-init.js"></script>
    <script id="xaringanExtra-freezeframe-options" type="application/json">{"selector":"img[src$=\"gif\"]","trigger":"click","overlay":false,"responsive":true,"warnings":true}</script>
    <script src="libs/kePrint-0.0.1/kePrint.js"></script>
    <link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />
    <link rel="stylesheet" href="assets/custom-presentation.css" type="text/css" />
  </head>
  <body>
    <textarea id="source">
class: center, middle, inverse, title-slide

.title[
# 06 R Markdown Basics
]
.subtitle[
## Elements of R e R Markdown
]
.author[
### Claudio Zandonella
]

---




class: size-small
# Document Structure

.pull-left-50[
### Source File
&lt;img src="images/rmarkdown-source.png" width="80%" style="display: block; margin: auto;" /&gt;

]

--

.pull-right-50[

#### YAML header

```yaml
---
title: "Untitled"
author: "ARCA"
date: "6/26/2022"
output: html_document
---
```

#### Markdown text

```
## R Markdown

This is an R Markdown document [...]
When you click the **Knit** button [...]

```

#### R code

````
```{r cars}
summary(cars)
```
````
]

---
class: size-small
# Document Structure

.pull-left-50[
### Source File
&lt;img src="images/rmarkdown-source.png" width="80%" style="display: block; margin: auto;" /&gt;

]

.pull-right-50[
### Compiled Output

&lt;img src="images/rmarkdown-compiled.png" width="80%" style="display: block; margin: auto;" /&gt;
]

---

# R Markdown Workflow

&lt;img src="images/rmarkdown-workflow.png" width="65%" style="display: block; margin: auto;" /&gt;

---
class: size-small
# Markdown Syntax

.pull-left-50[
.pull-left-50[
```
plain text

*italics* and _italics_
**bold** and __bold__
***bold-italic***  
`code`


# Header 1
## Header 2
### Header 3
#### Header 4  




&gt; blockquote

[link](https://...)
image:  
![](path/to/image.png) 
```
]
.pull-right-50[
plain text

*italics* and _italics_  
**bold** and __bold__  
***bold-italic***  
`code`

&lt;div class="example"&gt;
&lt;h1&gt;Header 1&lt;/h1&gt;
&lt;h2&gt;Header 2&lt;/h2&gt;
&lt;h3&gt;Header 3&lt;/h3&gt;
&lt;h4&gt;Header 4&lt;/h4&gt;
&lt;/div&gt;

&gt; blockquote

[link](https://www.dpss.unipd.it/arca/home)

image:

&lt;img src="images/arca-logo.svg" width="30%" style="display: block; margin: auto;" /&gt;

]

]

.pull-right-50[
.pull-left-50[
```
Unordered list:

- item
- item
  - sub-item

Ordered list:

1. first
1. second
  1. sub-item
  1. sub-item
  
Table:

Col-1 | Col-2
----- | -----
  A   |   B
  C   |   D
```
]

.pull-right-50[
Unordered list:

- item
- item
  - sub-item

Ordered list:

1. first
1. second
  1. sub-item
  1. sub-item
  

Table:

Col-1 | Col-2
----- | -----
  A   |   B
  C   |   D
]

]

---
class: size-small

.pull-left-50[
# Code
#### Inline Code

The result is `` `r round(3.46, 1)` ``  
The result is 3.5

#### Chunk
````
```{&lt;engine&gt; &lt;chunck-name&gt;, &lt;options, ...&gt;}
&lt;body&gt;
```
````

#### Chuncks setup
````
```{r setup, include=FALSE}
library("&lt;package-name&gt;")

# Chunk default settings
knitr::opts_chunk$set(echo = FALSE,
                      &lt;other-options&gt;,
                      ...)

# Other options
options(width = 80)
```
````
]

.pull-right-50[

### Knitr Chunk Options

https://yihui.org/knitr/options/

.pull-left-50[
#### Code Evalaution
- eval

#### Text Output
- echo
- include
- collapse (only html)
- results
- message
- warning
- error

#### Format
- prompt
- comment
- size
]

.pull-right-50[
#### Figures

- dev
- dev.args
- dpi
- fig.width, fig.height
- fig.asp
- out.width, out.height
- fig.align
- fig.pos (only LaTeX)
- fig.cap
- fig.scap (only LaTeX)
- sanitize (only LaTeX)

#### Other

- cache
- child
]
]


---
class: size-small
# YAML Header

.pull-left-50[

```r
---
title: "My Beatiful Paper"
subtitle: "On something very interesting"
author:
  - First Author^[Institution One]
  - name: Second Author
    affiliation: Institution two
date: "`r format(Sys.time(), '%d %B, %Y')`"
output:
  html_document:
    number_sections: true
    toc: true
  pdf_document:
    latex_engine: pdflatex
    number_sections: true
    toc: true

abstract: |
  This is my abstract.
  
  On multiple lines
---
```

]

.pull-right-50[
.pull-left-50[

#### General Notes

1. YAML is strict about indentation
1. Options repeated for different output formats
1. Path specification is relative to document

#### TOC Options

- toc_depth
- toc_float (only html)
- collapsed (only html)

#### Include Content

&lt;code&gt;
includes:&lt;br&gt;
&amp;emsp;in_header&lt;br&gt;
&amp;emsp;before_body&lt;br&gt;
&amp;emsp;after_body
&lt;/code&gt;

]

.pull-right-50[
#### HTML Options

- keep_md 
- css 

#### `\(\LaTeX\)` Options

- keep_tex
- documentclass
- classoption
- geometry
- linestretch
- fontsize
- fontfamily

#### Bibliography

- bibliography
- cls
]
]

---
class: size-small
# Outputs

.pull-left-50[
### Default

#### HTML

- `output:html_document`, web page
- `output:ioslides_presentation`, slides 

#### PDF

- `output:pdf_document`, document
- `output:beamer_presentation`, slides

To get pdf outputs we need `\(\LaTeX\)`&lt;br&gt;Easiest way is to use `tinytex`


```r
tinytex::install_tinytex()
```

#### WORD document... really ?!?
]

.pull-right-50[
### Bookdown


```r
install.packages("bookdown")
```

- better for large (multi-page, chapters) documents.
- easier numbering and cross-referencing figures/tables/equations

#### HTML

```r
output:
  bookdown::html_document2 
```

#### PDF

```r
output:
  bookdown::pdf_document2 
```
]

---
class:size-small

# References

.pull-left-50[

```r
bibliography: &lt;ref-file&gt;.bib 
cls: &lt;custom-style&gt;.cls
```

#### `.bib` file

Reference manager as Zotero (https://www.zotero.org/)


```r
@Manual{rcoreteamR,
    title = {R: A Language and Environment for Statistical Computing},
    author = {{R Core Team}},
    organization = {R Foundation for Statistical Computing},
    address = {Vienna, Austria},
    year = {2021},
    url = {https://www.R-project.org/},
  }
```

#### `.cls` file

Get required style from https://www.zotero.org/styles
]

.pull-right-50[

#### Bibliography

By default, is printed at the end of the document. Use `&lt;div id="refs"&gt;&lt;/div&gt;` to force the position.

```html
# References
&lt;div id="refs"&gt;&lt;/div&gt;
# Appendix
```

#### Intext Citations

&lt;table class="table table-striped table-hover" style="margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; Command &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; Result &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;width: 6cm; "&gt; [@rcoreteamR] &lt;/td&gt;
   &lt;td style="text-align:left;width: 6cm; "&gt; (R Core Team, 2021) &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;width: 6cm; "&gt; @rcoreteamR &lt;/td&gt;
   &lt;td style="text-align:left;width: 6cm; "&gt; R Core Team (2021) &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;width: 6cm; "&gt; [-@rcoreteamR] &lt;/td&gt;
   &lt;td style="text-align:left;width: 6cm; "&gt; (2021) &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;width: 6cm; "&gt; [@rcoreteamR, text] &lt;/td&gt;
   &lt;td style="text-align:left;width: 6cm; "&gt; (R Core Team, 2021, text) &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;width: 6cm; "&gt; [text, @rcoreteamR] &lt;/td&gt;
   &lt;td style="text-align:left;width: 6cm; "&gt; (text, R Core Team, 2021) &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;width: 6cm; "&gt; [@rcoreteamR; @yihuiRMarkdown2020] &lt;/td&gt;
   &lt;td style="text-align:left;width: 6cm; "&gt; (R Core Team, 2021; Xie et al., 2020) &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

]


---
class:size-small
# Figures

.pull-left-50[

#### Images

````
```{r &lt;tag-fig&gt;, fig.cap = "&lt;caption&gt;", ...}
knitr::include_graphics("&lt;path-to-figure&gt;")
```
````

#### Plots
````
```{r &lt;tag-fig&gt;, fig.cap = "&lt;caption&gt;", ...}
ggplot(...)+
  ...
```
````

#### In Text Reference (bookdown)

`\@ref(fig:&lt;tag-fig&gt;)`

- Do not use underscore (`"_"`) in the tag-name
- `fig.cap` is required for referencing.
]

.pull-right-50[
#### Options

- `dev`, device for plotting (`'png'`, `'pdf'`, `'tikz'`)
- `dev.args`, settings for the device
- `dpi`, definition (dots per inch)
- `fig.width`/`fig.height`, plot size in inches
- `fig.asp`, plot aspect ratio height/width
- `out.width`/`out.height` size in the document
- `fig.align`, values `'left'`, `'right'`, `'center'`
- `fig.cap`, figure caption

#### Extra `\(\LaTeX\)`
- `fig.pos`, values `'h'` (here), `'t'` (top), `'b'` (bottom), `'H'` (HERE need `\usepackage{float}`) 
- `fig.scap`, short caption for list
- `sanitize`, escape special `\(\LaTeX\)` characters
]

---
class:size-small
# Tables with kableExtra

.pull-left-50[


```r
install.packages("kableExtra")
```


````
```{r &lt;tag-table&gt;, ...}
kable(
  &lt;data&gt;,
  format,
  col.names = NA,
  align,
  caption = "&lt;caption&gt;",
  escape = TRUE,
  ...
)
```
````

#### In Text Reference (bookdown)

`\@ref(tab:&lt;tag-table&gt;)`

- Do not use underscore (`"_"`) in the tag-name
- `caption` is required for referencing.
]

.pull-right-50[
#### Options

- `kable_styling()`, modify style options  (`full_width`, `position`, `font_size`)
  - `bootstrap_options`, specific HTML options (`"striped"`, `"hover"`)
  - `latex_options`, specific LaaTeX options (`"striped"`, `"hold_position"`, `"scale_down"`)
- `add_header_above()`, add a header row on top
- `pack_rows()`, group table rows
- `collapse_rows()`, collapse repeated rows
- `footnote()`, add footnote
- `column_spec()`, customize column look
- `row_spec()`, customize row look


#### Documentation

.pull-left-50[
- [For HTML](https://cran.r-project.org/web/packages/kableExtra/vignettes/awesome_table_in_html.html)
]

.pull-right-50[
- [For PDF](https://cran.r-project.org/web/packages/kableExtra/vignettes/awesome_table_in_pdf.pdf)
]
]
---
class: size-small

.pull-left-50[
## Equations
#### Inline

`$\sqrt{16} = 2^2$` &amp;nbsp;&amp;nbsp; ➡ &amp;nbsp;&amp;nbsp; `\(\sqrt{16} = 2^2\)` 

#### Blocks

```
$$
(\#eq:&lt;tag-equation&gt;)
P(H|D) = \frac{P(H)\ P(D|H)}{P(D)}
$$
```
$$
P(H|D) = \frac{P(H)\ P(D|H)}{P(D)}
$$

- All math symbols ([link]( https://artofproblemsolving.com/wiki/index.php/LaTeX:Symbols))
- `\(\LaTeX\)` math syntax ([link](https://www.overleaf.com/learn/latex/Mathematical_expressions))
- In text reference (bookdown) `\@ref(eq:&lt;tag-equation&gt;)`
- Do not use underscore (`"_"`) in the tag-name
]


.pull-right-50[
## Sections

&lt;table class="table table-striped table-hover" style="margin-left: auto; margin-right: auto;"&gt;
 &lt;thead&gt;
  &lt;tr&gt;
   &lt;th style="text-align:left;"&gt; Command &lt;/th&gt;
   &lt;th style="text-align:left;"&gt; Result &lt;/th&gt;
  &lt;/tr&gt;
 &lt;/thead&gt;
&lt;tbody&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;width: 6cm; "&gt; # My Title &lt;/td&gt;
   &lt;td style="text-align:left;width: 6cm; "&gt; default tag (my-title) &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;width: 6cm; "&gt; # Title {#tag-section} &lt;/td&gt;
   &lt;td style="text-align:left;width: 6cm; "&gt; custom tag (tag-section) &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;width: 6cm; "&gt; # Title {.unnumbered} &lt;/td&gt;
   &lt;td style="text-align:left;width: 6cm; "&gt; no number &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;width: 6cm; "&gt; # Title {-} &lt;/td&gt;
   &lt;td style="text-align:left;width: 6cm; "&gt; no number &lt;/td&gt;
  &lt;/tr&gt;
  &lt;tr&gt;
   &lt;td style="text-align:left;width: 6cm; "&gt; # Title {.toc-ignore} &lt;/td&gt;
   &lt;td style="text-align:left;width: 6cm; "&gt; no in TOC &lt;/td&gt;
  &lt;/tr&gt;
&lt;/tbody&gt;
&lt;/table&gt;

&lt;div style="line-height:1em;"&gt;&amp;nbsp;&lt;/div&gt;

#### In Text Reference (bookdown)

`\@ref(&lt;tag-section&gt;)`

- Do not use underscore (`"_"`) in the tag-name

#### Referece to custom part

- Create tag: `&lt;a name="tag-section"&gt;&lt;/a&gt;`
- Link to tag: `[Link to ...]\(\#tag-section\)`
]

---
class: end, middle, center

# Thanks!
    </textarea>
<style data-target="print-only">@media screen {.remark-slide-container{display:block;}.remark-slide-scaler{box-shadow:none;}}</style>
<script src="https://remarkjs.com/downloads/remark-latest.min.js"></script>
<script>var slideshow = remark.create({
"highlightStyle": "github",
"highlightLines": true,
"countIncrementalSlides": true,
"ratio": "16:9",
"slideNumberFormat": "<div class=\"progress-bar-container\">\n  <div class=\"progress-bar\" style=\"width: calc(%current% / %total% * 100%);\">\n  </div>\n</div>`\n"
});
if (window.HTMLWidgets) slideshow.on('afterShowSlide', function (slide) {
  window.dispatchEvent(new Event('resize'));
});
(function(d) {
  var s = d.createElement("style"), r = d.querySelector(".remark-slide-scaler");
  if (!r) return;
  s.type = "text/css"; s.innerHTML = "@page {size: " + r.style.width + " " + r.style.height +"; }";
  d.head.appendChild(s);
})(document);

(function(d) {
  var el = d.getElementsByClassName("remark-slides-area");
  if (!el) return;
  var slide, slides = slideshow.getSlides(), els = el[0].children;
  for (var i = 1; i < slides.length; i++) {
    slide = slides[i];
    if (slide.properties.continued === "true" || slide.properties.count === "false") {
      els[i - 1].className += ' has-continuation';
    }
  }
  var s = d.createElement("style");
  s.type = "text/css"; s.innerHTML = "@media print { .has-continuation { display: none; } }";
  d.head.appendChild(s);
})(document);
// delete the temporary CSS (for displaying all slides initially) when the user
// starts to view slides
(function() {
  var deleted = false;
  slideshow.on('beforeShowSlide', function(slide) {
    if (deleted) return;
    var sheets = document.styleSheets, node;
    for (var i = 0; i < sheets.length; i++) {
      node = sheets[i].ownerNode;
      if (node.dataset["target"] !== "print-only") continue;
      node.parentNode.removeChild(node);
    }
    deleted = true;
  });
})();
// add `data-at-shortcutkeys` attribute to <body> to resolve conflicts with JAWS
// screen reader (see PR #262)
(function(d) {
  let res = {};
  d.querySelectorAll('.remark-help-content table tr').forEach(tr => {
    const t = tr.querySelector('td:nth-child(2)').innerText;
    tr.querySelectorAll('td:first-child .key').forEach(key => {
      const k = key.innerText;
      if (/^[a-z]$/.test(k)) res[k] = t;  // must be a single letter (key)
    });
  });
  d.body.setAttribute('data-at-shortcutkeys', JSON.stringify(res));
})(document);
(function() {
  "use strict"
  // Replace <script> tags in slides area to make them executable
  var scripts = document.querySelectorAll(
    '.remark-slides-area .remark-slide-container script'
  );
  if (!scripts.length) return;
  for (var i = 0; i < scripts.length; i++) {
    var s = document.createElement('script');
    var code = document.createTextNode(scripts[i].textContent);
    s.appendChild(code);
    var scriptAttrs = scripts[i].attributes;
    for (var j = 0; j < scriptAttrs.length; j++) {
      s.setAttribute(scriptAttrs[j].name, scriptAttrs[j].value);
    }
    scripts[i].parentElement.replaceChild(s, scripts[i]);
  }
})();
(function() {
  var links = document.getElementsByTagName('a');
  for (var i = 0; i < links.length; i++) {
    if (/^(https?:)?\/\//.test(links[i].getAttribute('href'))) {
      links[i].target = '_blank';
    }
  }
})();
// adds .remark-code-has-line-highlighted class to <pre> parent elements
// of code chunks containing highlighted lines with class .remark-code-line-highlighted
(function(d) {
  const hlines = d.querySelectorAll('.remark-code-line-highlighted');
  const preParents = [];
  const findPreParent = function(line, p = 0) {
    if (p > 1) return null; // traverse up no further than grandparent
    const el = line.parentElement;
    return el.tagName === "PRE" ? el : findPreParent(el, ++p);
  };

  for (let line of hlines) {
    let pre = findPreParent(line);
    if (pre && !preParents.includes(pre)) preParents.push(pre);
  }
  preParents.forEach(p => p.classList.add("remark-code-has-line-highlighted"));
})(document);</script>

<script>
slideshow._releaseMath = function(el) {
  var i, text, code, codes = el.getElementsByTagName('code');
  for (i = 0; i < codes.length;) {
    code = codes[i];
    if (code.parentNode.tagName !== 'PRE' && code.childElementCount === 0) {
      text = code.textContent;
      if (/^\\\((.|\s)+\\\)$/.test(text) || /^\\\[(.|\s)+\\\]$/.test(text) ||
          /^\$\$(.|\s)+\$\$$/.test(text) ||
          /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)) {
        code.outerHTML = code.innerHTML;  // remove <code></code>
        continue;
      }
    }
    i++;
  }
};
slideshow._releaseMath(document);
</script>
<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
(function () {
  var script = document.createElement('script');
  script.type = 'text/javascript';
  script.src  = 'https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML';
  if (location.protocol !== 'file:' && /^https?:/.test(script.src))
    script.src  = script.src.replace(/^https?:/, '');
  document.getElementsByTagName('head')[0].appendChild(script);
})();
</script>
  </body>
</html>
